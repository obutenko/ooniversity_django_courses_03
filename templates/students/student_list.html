{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Student List{% endblock title %}

{% block nav_active_students %}active{% endblock nav_active_students %}

{% block content %}

	{% block students %}

			{% if messages %}
			<ul class="messages">
    			{% for message in messages %}
    				<li{% if message.tags %} class="{{ message.tags }}"{% endif %}><h3>{{ message }}</h3></li>
    			{% endfor %}
			</ul>
			{% endif %}
			<h2 class='possition'>Our students</h2>
			<a href="{% url 'students:add' %}"><input type="buttom" value="Добавить нового студента" class="btn btn-primary"></a>
			<div class='grey'>
				<table class='table'>
					<tr class='title_table'>
						<th>Name</th>
						<th>Address</th>
						<th>Skype</th>
						<th>Courses</th>
					</tr>
					{% for student in object_list %}
						<tr>
							<td><a href="{% url 'students:detail' student.id %}">{{ student.name }} {{ student.surname }}</a></td>
							<td>{{ student.address }}</td>
							<td>{{ student.skype }}</td>
							<td>
								{% for course in student.courses.all %}
									{% if course in student.courses.all %}
										<a href="{% url 'courses:detail' course.id %}">{{ course.name }}</a>
									{% endif %}
								{% endfor %}
							</td>
							<td><a href="{% url 'students:edit' student.id %}"><input class="btn btn-default" type="buttom" value="Изменить"></a></td>
							<td><a href="{% url 'students:remove' student.id %}"><input class="btn btn-default" type="buttom" value="Удалить"></a></td>
						</tr>
					{% endfor %}
				</table>
				<nav>
				  <ul class="pagination">
				  	{% if page_obj.has_previous %}
				    	<li>
				      		<a href="?page={{ page_obj.previous_page_number }}/" aria-label="Previous"><< previous</a>
				    	</li>
				    {% endif %}
				    {% for page in page_obj.paginator.page_range %}
				    	{% if page == page_obj.number %}
				    		<li class="active"><a href="?page={{ page }}">{{ page }}</a></li>
				    	{% else %}
				    		<li><a href="?page={{ page }}">{{ page }}</a></li>
				    	{% endif %}
				    {% endfor %}
				    {% if page_obj.has_next %}
				    	<li>
				      		<a href="?page={{ page_obj.next_page_number }}" aria-label="Next">next >></a>
				    	</li>
				    {% endif %}
				   </ul>
				</nav>
			</div>

	{% endblock students %}
	
{% endblock content %}